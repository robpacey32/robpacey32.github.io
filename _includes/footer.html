<footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      {% include social-networks-links.html %}
      {% if page.footer-extra %}
        <div class="footer-custom-content">
          {% for file in page.footer-extra %}
            {% include {{ file }} %}
          {% endfor %}
        </div>
      {% endif %}
      <p class="copyright text-muted">
      {% if site.author %}
        {{ site.author }}
        &nbsp;&bull;&nbsp;
      {% endif %}
      {{ site.time | date: '%Y' }}

      {% if site.url-pretty %}
        &nbsp;&bull;&nbsp;
        <span class="author-site">
          <a href="{% if site.url-canonical %}{{ site.url-canonical }}{% else %}{{ '/' | absolute_url }}{% endif %}">{{ site.url-pretty }}</a>
        </span>
      {% endif %}

      {% if site.matomo %}
        {% if site.matomo.opt-out %}
          &nbsp;&bull;&nbsp;
          <a href="http://{{- site.matomo.uri -}}/index.php?module=CoreAdminHome&action=optOut" target="_blank" class="text_muted">Do-not-Track</a>
        {% endif %}
      {% endif%}

      {% if site.edit_page_button and site.github.repository_url %}
        &nbsp;&bull;&nbsp;
        <a title="Edit this page on GitHub" href="{{ site.github.repository_url }}/edit/{{ site.github.source.branch }}/{{ page.path }}" class="text_muted">Edit page</a>
       {% endif%}

        {% comment %}
        {% unless site.remove-ads %}
        <p class="theme-by text-muted">
          Powered by
          <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
        </p>
        {% endunless %}
        {% endcomment %}
      </div>
    </div>
  </div>
</footer>

<!-- âœ… Add the Osano Cookie Consent here -->
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>

<!-- âœ… Define GA functions BEFORE Osano initialises -->
<script>
function enableAnalytics() {
  if (window.analyticsEnabled) return; // prevent duplicates
  window.analyticsEnabled = true;

  // ðŸ‘‰ Replace G-XXXXXXX with your real Measurement ID
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.googletagmanager.com/gtag/js?id=G-J2C9X7Y3BX','ga');

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-J2C9X7Y3BX');

  console.log("âœ… Google Analytics enabled");
}

function disableAnalytics() {
  console.log('ðŸš« Analytics disabled');
}
</script>

<!-- âœ… Now initialise Osano after GA functions exist -->
<script>
window.cookieconsent.initialise({
  palette: {
    popup: {
      background: "#444",   // grey background for the banner
      text: "#ffffff"       // white text for readability
    },
    button: {
      background: "#3a9bdc", // light blue for Accept
      text: "#ffffff"
    },
    highlight: {
      background: "#001f3f", // dark blue for Decline
      text: "#ffffff"
    }
  },
  theme: "edgeless",
  type: "opt-in",
  content: {
    message: "This website uses cookies to improve your experience.",
    dismiss: "Decline",
    allow: "Accept",
    link: "Learn more",
    href: "/privacy"
  },
  onInitialise: function (status) {
    if (this.hasConsented()) enableAnalytics();
  },
  onStatusChange: function(status, chosenBefore) {
    if (this.hasConsented()) enableAnalytics();
  },
  onRevokeChoice: function() {
    disableAnalytics();
  }
});
</script>